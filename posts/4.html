<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" name="viewport"><meta name="description" content="Github Action è‡ªåŠ¨éƒ¨ç½²Hexoå¹¶åœ¨çº¿ç¼–è¾‘æ–‡ç« ã€æ–°å»ºæ–‡ç« "><meta name="hexo-theme-A4" content="v1.7.0"><link rel="alternate icon" type="image/webp" href="/img/favicon.ico"><title>è®°å¿†ç¬”è®° | å›å­æœ‰ä¸‰ä¹ï¼Œå–ä¹èº«ï¼Œè§‚ä¹ä¿—ï¼Œå¯Ÿä¹å¤ã€‚</title><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/reset.css"><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/markdown.css"><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/fonts.css"><link rel="stylesheet" href="/css/ui.css"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="paper"><div class="shadow-drop-2-bottom paper-main"><div class="header"><div class="header-container"><img style="width:56px;height:auto" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"><div class="header-content"><a class="logo" href="/">è®°å¿†ç¬”è®°</a> <span class="description">å›å­æœ‰ä¸‰ä¹ï¼Œå–ä¹èº«ï¼Œè§‚ä¹ä¿—ï¼Œå¯Ÿä¹å¤ã€‚</span></div></div><ul class="nav"><li><a href="/">é¦–é¡µ</a></li><li><a href="/xiazai/">ä¸‹è½½</a></li><li><a href="/about/">å…³äº</a></li></ul></div><div class="post-main"><div class="post-main-title">Github Action è‡ªåŠ¨éƒ¨ç½²Hexoå¹¶åœ¨çº¿ç¼–è¾‘æ–‡ç« ã€æ–°å»ºæ–‡ç« </div><div class="post-md"><ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Github-Action-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B"><span class="post-toc-text">Github Action ä½¿ç”¨æ•™ç¨‹</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%98%E6%94%BE%E6%BA%90%E7%A0%81%E7%9A%84%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93"><span class="post-toc-text">åˆ›å»ºå­˜æ”¾æºç çš„ç§æœ‰ä»“åº“</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%85%8D%E7%BD%AE-Github-Action"><span class="post-toc-text">é…ç½® Github Action</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%87%8D%E6%96%B0%E8%AE%BE%E7%BD%AE%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%92%8C%E5%88%86%E6%94%AF"><span class="post-toc-text">é‡æ–°è®¾ç½®è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E6%96%87%E7%AB%A0%E5%92%8C%E6%96%B0%E5%BB%BA%E6%96%87%E7%AB%A0"><span class="post-toc-text">åœ¨çº¿ç¼–è¾‘æ–‡ç« å’Œæ–°å»ºæ–‡ç« </span></a></li></ol><blockquote><p>æ¯æ¬¡éƒ¨ç½²hexoéƒ½éœ€è¦å…è®¸ä¸‰ä¸ªæŒ‡ä»¤ <code>hexo cleanã€hexo gã€hexo d</code>ï¼Œæˆ‘è‡ªå·±ä½¿ç”¨çš„æ¢¯å­ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œæ¡Œé¢éƒ¨ç½²æ—¶å€™10æ¬¡æœ‰9æ¬¡éƒ¨ç½²å¤±è´¥ã€‚æ‰€ä»¥å¼€å§‹ç ”ç©¶æ€ä¹ˆçº¿ä¸Šéƒ¨ç½²å’Œç¼–è¾‘åšæ–‡ä»¥åŠæ–°å»ºæ–‡ç« ï¼Œä»¥ä¸‹æ˜¯æ•´ç†åçš„æŠ€å·§ã€‚</p></blockquote><h3 id="Github-Action-ä½¿ç”¨æ•™ç¨‹"><a href="#Github-Action-ä½¿ç”¨æ•™ç¨‹" class="headerlink" title="Github Action ä½¿ç”¨æ•™ç¨‹"></a>Github Action ä½¿ç”¨æ•™ç¨‹</h3><p>ä¸ºäº†ç¡®ä¿äº¤ç”±<code>Github Action</code>æ¥æŒç»­éƒ¨ç½²æ—¶ï¼Œ<code>Github Action</code>Â å…·å¤‡è¶³å¤Ÿçš„æƒé™æ¥è¿›è¡ŒÂ <code>hexo deploy</code>Â æ“ä½œ,éœ€è¦å…ˆè·å–Â <code>Token</code>ã€‚</p><p><img src="/img/202308012320254.png"></p><p><img src="/img/202308012320184.png"></p><h3 id="åˆ›å»ºå­˜æ”¾æºç çš„ç§æœ‰ä»“åº“"><a href="#åˆ›å»ºå­˜æ”¾æºç çš„ç§æœ‰ä»“åº“" class="headerlink" title="åˆ›å»ºå­˜æ”¾æºç çš„ç§æœ‰ä»“åº“"></a>åˆ›å»ºå­˜æ”¾æºç çš„ç§æœ‰ä»“åº“</h3><p>æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç”¨æ¥å­˜æ”¾Â <code>Hexo</code>Â åšå®¢æºç <code>hexo init myblog æ–°å»ºçš„æ–‡ä»¶å¤¹</code>çš„ç§æœ‰ä»“åº“,ä»“åº“å‘½å<code>myblog</code></p><p><img src="/img/202308012321516.png"></p><p>åˆ›å»ºå®Œæˆåï¼ŒæŠŠ<code>myblog</code>æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°ç§æœ‰åº“å†…ã€‚</p><blockquote><p>åœ¨æœ¬åœ°æ–‡ä»¶å¤¹ä¸­æ‰“å¼€ git bashï¼Œè¾“å…¥ git init å‘½ä»¤ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæœ¬åœ°ä»“åº“ã€‚<br>å°†ä½ çš„é¡¹ç›®æ–‡ä»¶å¤åˆ¶æˆ–ç§»åŠ¨åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åè¾“å…¥ git add . å‘½ä»¤ï¼Œå°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºã€‚<br>è¾“å…¥ git commit -m â€œfirst commitâ€ å‘½ä»¤ï¼Œå°†æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæäº¤ä¿¡æ¯ã€‚<br>è¾“å…¥ git remote add origin ä»“åº“åœ°å€.git å‘½ä»¤ï¼Œå°†æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å…³è”èµ·æ¥<br>è¾“å…¥ git push -u origin master å‘½ä»¤ï¼Œå°†æœ¬åœ°ä»“åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„ master åˆ†æ”¯ï¼Œå¹¶è®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ã€‚</p></blockquote><h3 id="é…ç½®-Github-Action"><a href="#é…ç½®-Github-Action" class="headerlink" title="é…ç½® Github Action"></a>é…ç½® Github Action</h3><ol><li>åœ¨<code>[myblog]</code>æ–°å»º<code>.github</code>æ–‡ä»¶å¤¹,æ³¨æ„å¼€å¤´æ˜¯æœ‰ä¸ª<code>.</code>çš„ã€‚ç„¶ååœ¨<code>.github</code>Â å†…æ–°å»ºÂ <code>workflows</code>Â æ–‡ä»¶å¤¹ï¼Œå†åœ¨Â <code>workflows</code>Â æ–‡ä»¶å¤¹å†…æ–°å»ºÂ <code>autodeploy.yml</code>,åœ¨<code>[myblog]/.github/workflows/autodeploy.yml</code>Â é‡Œé¢è¾“å…¥</li></ol><pre><code class="yaml">name: è‡ªåŠ¨éƒ¨ç½²
# å½“æœ‰æ”¹åŠ¨æ¨é€åˆ°masteråˆ†æ”¯æ—¶ï¼Œå¯åŠ¨Action
on:
  push:
    branches:
      - master
  release:
    types:
      - published

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: æ£€æŸ¥åˆ†æ”¯
        uses: actions/checkout@v2
        with:
          ref: master

      - name: å®‰è£… Node
        uses: actions/setup-node@v1
        with:
          node-version: &quot;18.17.0&quot;

      - name: å®‰è£… Hexo
        run: |
          export TZ=&#39;Asia/Shanghai&#39;
          npm install hexo-cli -g

      - name: ç¼“å­˜ Hexo
        id: cache-npm
        uses: actions/cache@v3
        env:
          cache-name: cache-node-modules
        with:
          path: node_modules
          key: $&#123;&#123; runner.os &#125;&#125;-build-$&#123;&#123; env.cache-name &#125;&#125;-$&#123;&#123; hashFiles('**/package-lock.json') &#125;&#125;
          restore-keys: |
            $&#123;&#123; runner.os &#125;&#125;-build-$&#123;&#123; env.cache-name &#125;&#125;-
            $&#123;&#123; runner.os &#125;&#125;-build-
            $&#123;&#123; runner.os &#125;&#125;-

      - name: å®‰è£…ä¾èµ–
        if: $&#123;&#123; steps.cache-npm.outputs.cache-hit != 'true' &#125;&#125;
        run: |
          npm install gulp-cli -g #å…¨å±€å®‰è£…gulp
          npm install --save
          npm install hexo-all-minifier --save
          npm install hexo-abbrlink2 --save

      - name: ç”Ÿæˆé™æ€æ–‡ä»¶
        run: |
          hexo clean
          # hexo new page index # é¦–é¡µ
          hexo new page list  # æ–‡ç« 
          hexo new page xiazai # ä¸‹è½½
          hexo new page about # å…³äº
          hexo new page admin  #åå°
          hexo new page friends # å‹é“¾
          hexo generate

      - name: éƒ¨ç½²åˆ°Github
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          token: ghp_XXXXXXXXXXXXXXXXXXXXXXX
          repository-name: MemoryCollection/hexo.github.io
          branch: master
          folder: public
          commit-message: &quot;$&#123;&#123; github.event.head_commit.message &#125;&#125; Updated By Github Actions&quot;
</code></pre><p>ä¹‹åéœ€è¦è‡ªå·±åˆ°ä»“åº“çš„<code>Settings-&gt;Secrets-&gt;actions</code> ä¸‹æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå˜é‡åå‚è€ƒè„šæœ¬ä¸­å‡ºç°çš„ï¼Œä¾æ¬¡æ·»åŠ ã€‚</p><h3 id="é‡æ–°è®¾ç½®è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯"><a href="#é‡æ–°è®¾ç½®è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯" class="headerlink" title="é‡æ–°è®¾ç½®è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯"></a>é‡æ–°è®¾ç½®è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯</h3><p>1.æ·»åŠ å±è”½é¡¹<br>å› ä¸ºèƒ½å¤Ÿä½¿ç”¨æŒ‡ä»¤è¿›è¡Œå®‰è£…çš„å†…å®¹ä¸åŒ…æ‹¬åœ¨éœ€è¦æäº¤çš„æºç å†…ï¼Œæ‰€æœ‰æˆ‘ä»¬éœ€è¦å°†è¿™äº›å†…å®¹æ·»åŠ åˆ°å±è”½é¡¹ï¼Œè¡¨ç¤ºä¸ä¸Šä¼ åˆ° github ä¸Šã€‚è¿™æ ·å¯ä»¥æ˜¾è‘—å‡å°‘éœ€è¦æäº¤çš„æ–‡ä»¶é‡å’ŒåŠ å¿«æäº¤é€Ÿåº¦ã€‚</p><p>æ‰“å¼€<code>[myblog]/.gitignore</code>,è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><pre><code class="yaml">.DS_Store
Thumbs.db
db.json
*.log
node_modules/
public/
.deploy*/
.deploy_git*/
.idea
themes/ä¸»é¢˜/.git #æ›¿æ¢ä¸»é¢˜æ–‡ä»¶å¤¹
</code></pre><p>2.æäº¤æºç åˆ°ç§æœ‰ä»“åº“<code>[myblog]</code><br>åœ¨åšå®¢æ ¹ç›®å½•<code>[myblog]</code>ä¸‹å¯åŠ¨ç»ˆç«¯ï¼Œä½¿ç”¨ git æŒ‡ä»¤é‡è®¾ä»“åº“åœ°å€ã€‚è¿™æ ·åœ¨æ–°å»ºä»“åº“ï¼Œæˆ‘ä»¬ä»æ—§å¯ä»¥ä¿ç•™çè´µçš„ commit historyï¼Œä¾¿äºç‰ˆæœ¬å›æ»šã€‚</p><pre><code class="git">git remote rm origin # åˆ é™¤åŸæœ‰ä»“åº“é“¾æ¥
git remote add origin git@github.com:[GithubUsername]/[SourceRepo].git #[SourceRepo]ä¸ºæ–°çš„å­˜æ”¾æºç çš„githubç§æœ‰ä»“åº“
git checkout -b master # åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œ
#2020å¹´10æœˆågithubæ–°å»ºä»“åº“é»˜è®¤åˆ†æ”¯æ”¹ä¸ºmainï¼Œæ³¨æ„æ›´æ”¹
# å¦‚æœä¸æ˜¯ï¼Œåé¢çš„æ‰€æœ‰è®¾ç½®çš„åˆ†æ”¯è®°å¾—ä¿æŒä¸€è‡´
git add .
git commit -m &quot;github action update&quot;
git push origin master
#2020å¹´10æœˆågithubæ–°å»ºä»“åº“é»˜è®¤åˆ†æ”¯æ”¹ä¸ºmainï¼Œæ³¨æ„æ›´æ”¹
</code></pre><blockquote><p>è¦æ˜¯åœ¨ github action éƒ¨ç½²æ—¶é‡åˆ° unknown block tag: â€œtagnameâ€è¿™æ ·çš„æŠ¥é”™ï¼Œè¯´æ˜ä½ å¯èƒ½æ²¡æœ‰æ­£ç¡®ä¸Šä¼ ä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯èƒ½é‡åˆ°å®‰è£…ä¾èµ–æˆ–ç”Ÿæˆé¡µé¢å¤±è´¥çš„æƒ…å†µã€‚</p><p>è‹¥æ˜¯é‡åˆ° spawn failed æŠ¥é”™ã€‚åœ¨ github action çš„é…ç½®ä¸­å‡ºç°è¿™ä¸€æŠ¥é”™ã€‚ä¸€èˆ¬æ˜¯å› ä¸ºæ¶‰åŠåˆ°éƒ¨ç½²åœ°å€çš„é…ç½®é¡¹æœ‰è¯¯ã€‚</p></blockquote><h3 id="åœ¨çº¿ç¼–è¾‘æ–‡ç« å’Œæ–°å»ºæ–‡ç« "><a href="#åœ¨çº¿ç¼–è¾‘æ–‡ç« å’Œæ–°å»ºæ–‡ç« " class="headerlink" title="åœ¨çº¿ç¼–è¾‘æ–‡ç« å’Œæ–°å»ºæ–‡ç« "></a>åœ¨çº¿ç¼–è¾‘æ–‡ç« å’Œæ–°å»ºæ–‡ç« </h3><p>åœ¨ä¸»é¢˜ç›®å½•å†…ä¿®æ”¹post.ejsæ–‡ä»¶ï¼Œåœ¨åˆé€‚ä½ç½®å¡«å†™ä»¥ä¸‹ä»£ç </p><pre><code class="yaml">&lt;a href=&quot;https://github.com/ç”¨æˆ·å/ä»“åº“/edit/master/source/&lt;%- page.source %&gt;&quot; target=&quot;_blank&quot;&gt; âœ ç¼–è¾‘æ–‡ç«  âœ&lt;/a&gt; 
 
&lt;a href=&quot;https://github.com/ç”¨æˆ·å/ä»“åº“/new/master/source&quot; target=&quot;_blank&quot;&gt; âœ æ–°å»ºæ–‡ç«  âœ&lt;/a&gt; 
</code></pre></div><div class="post-meta"><i><span>2023-08-02 | </span><span>æ ‡ç­¾: <a href="/tags/Hexo/">Hexo </a></span><span>| <a href="https://github.com/MemoryCollection/myblog/edit/master/source/_posts/GithubAction.md" target="_blank">âœ ç¼–è¾‘æ–‡ç«  âœ</a></span></i></div></div><div class="footer"><span>Â© 2010-2023 China / <a href="/admin/">åå° </a>/ <a href="/friends/">å‹é“¾ </a>/ <a target="_blank" rel="noopener" href="https://github.com/MemoryCollection/myblog/new/master/source/_posts">âœ æ–°å»ºæ–‡ç«  âœ</a></span></div><div class="footer-last"><span>ğŸŒŠå›å­æœ‰ä¸‰ä¹ï¼Œå–ä¹èº«ï¼Œè§‚ä¹ä¿—ï¼Œå¯Ÿä¹å¤ã€‚ ğŸŒŠ</span> <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span></div><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/a11y-dark.min.css"><script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlight.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlightjs-line-numbers.js"></script><script>hljs.initHighlightingOnLoad(),hljs.initLineNumbersOnLoad()</script></div></div></body></html>